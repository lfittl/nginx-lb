## nginx load balancer

This is an example docker image of how to use etcd + nginx as a dynamic load balancer.

### Running on OSX (boot2docker)

```
docker run -d --name etcd -p 4001:4001 -p 8001:8001 quay.io/coreos/etcd -addr `boot2docker ip`:4001 -peer-addr `boot2docker ip`:8001 -name etcd-node1

export ETCDCTL_PEERS=`boot2docker ip`:4001

etcdctl set /app/id example
etcdctl set /app/hostname example.com
etcdctl set /app/ssl myexamplecert
etcdctl set /app/upstreams/app1 `boot2docker ip`:5000

docker build -t lfittl/nginx-lb .

docker run -d --name nginx -p 80:80 -p 443:443 -v /Users/myuser/myssl:/etc/nginx/ssl -e HOST_IP=`boot2docker ip` lfittl/nginx-lb

docker logs -f nginx

docker exec -it nginx cat /etc/nginx/conf.d/app.conf
```
